!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/assets/",__webpack_require__(__webpack_require__.s=160)}({160:function(module,exports,__webpack_require__){var require,f;f=function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(!u&&("function"==typeof require&&require))return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){return s(t[o][1][e]||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ActivityFeedTopicParserService=function(){function ActivityFeedTopicParserService(listenersManager){(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ActivityFeedTopicParserService),this.newNotificationListenersManager=listenersManager.getManager(),this.notificationRemovedListenersManager=listenersManager.getManager(),this.notificationConsumedListenersManager=listenersManager.getManager()}return _createClass(ActivityFeedTopicParserService,null,[{key:"initClass",value:function(){ActivityFeedTopicParserService.$inject=["listenersManager"]}}]),_createClass(ActivityFeedTopicParserService,[{key:"registerNewNotificationListener",value:function(listener){return this.newNotificationListenersManager.addListener(listener)}},{key:"registerNotificationRemovedListener",value:function(listener){return this.notificationRemovedListenersManager.addListener(listener)}},{key:"registerNotificationConsumedListener",value:function(listener){return this.notificationConsumedListenersManager.addListener(listener)}},{key:"parseTopicMessage",value:function(message){var activityPayload=JSON.parse(message.content);this.newNotificationListenersManager.callListeners(message.id,activityPayload)}},{key:"parseRemovedTopicMessage",value:function(message){var messageContent=JSON.parse(message.content);this.notificationRemovedListenersManager.callListeners(messageContent.removed_by,messageContent[messageContent.removed_by])}},{key:"parseConsumedTopicMessage",value:function(message){var messageContent=JSON.parse(message.content);this.notificationConsumedListenersManager.callListeners(messageContent.id)}}]),ActivityFeedTopicParserService}();ActivityFeedTopicParserService.initClass(),exports.activityFeedTopicParser=angular.module("gogModuleTopicParsers").service("activityFeedTopicParser",ActivityFeedTopicParserService)},{}],2:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),FriendsTopicParserService=function(){function FriendsTopicParserService(listenersManager){(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,FriendsTopicParserService),this._friendInviteReceivedListenersManager=listenersManager.getManager(),this._friendInviteRemovedListenersManager=listenersManager.getManager(),this._newFriendListenersManager=listenersManager.getManager(),this._friendRemovedListenersManager=listenersManager.getManager()}return _createClass(FriendsTopicParserService,null,[{key:"initClass",value:function(){FriendsTopicParserService.$inject=["listenersManager"],FriendsTopicParserService.KEYS=Object.freeze({NEW_INVITE:"new_invite",INVITE_REMOVED:"invite_removed",NEW_FRIEND:"new_friend",FRIEND_REMOVED:"friend_removed"}),FriendsTopicParserService.NEW_INVITE_RECEIVED_STATUS="invited"}}]),_createClass(FriendsTopicParserService,[{key:"parseTopicMessage",value:function(message){var content=JSON.parse(message.content);switch(content.key){case FriendsTopicParserService.KEYS.NEW_INVITE:this._onFriendInviteReceived(content.data);break;case FriendsTopicParserService.KEYS.INVITE_REMOVED:this._onFriendInviteRemoved(content.data);break;case FriendsTopicParserService.KEYS.NEW_FRIEND:this._onNewFriend(content.data);break;case FriendsTopicParserService.KEYS.FRIEND_REMOVED:this._onFriendRemoved(content.data);break;default:console.warn("Unknown friends topic key: "+message.key)}}},{key:"registerFriendInviteReceivedListener",value:function(listener){return this._friendInviteReceivedListenersManager.addListener(listener)}},{key:"_onFriendInviteReceived",value:function(data){data.status===FriendsTopicParserService.NEW_INVITE_RECEIVED_STATUS&&this._friendInviteReceivedListenersManager.callListeners({userName:data.user.username,userId:data.user_id,avatarUrls:data.user.avatar})}},{key:"registerFriendInviteRemovedListener",value:function(listener){return this._friendInviteRemovedListenersManager.addListener(listener)}},{key:"_onFriendInviteRemoved",value:function(data){this._friendInviteRemovedListenersManager.callListeners({userId:data.user_id})}},{key:"registerNewFriendListener",value:function(listener){return this._newFriendListenersManager.addListener(listener)}},{key:"_onNewFriend",value:function(data){this._newFriendListenersManager.callListeners({userName:data.user.username,userId:data.user_id,avatarUrls:data.user.avatar})}},{key:"registerFriendRemovedListener",value:function(listener){return this._friendRemovedListenersManager.addListener(listener)}},{key:"_onFriendRemoved",value:function(data){this._friendRemovedListenersManager.callListeners({userName:data.user.username,userId:data.user_id,avatarUrls:data.user.avatar})}}]),FriendsTopicParserService}();FriendsTopicParserService.initClass(),exports.friendsTopicParser=angular.module("gogModuleTopicParsers").service("friendsTopicParser",FriendsTopicParserService)},{}],3:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gogModuleTopicParsers=angular.module("gogModuleTopicParsers",[])},{}],4:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),MenuCustomTopicParser=function(){function MenuCustomTopicParser(listenersManager){(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,MenuCustomTopicParser),this.newWishlistNotificationListenersManager=listenersManager.getManager(),this.newForumNotificationListenersManager=listenersManager.getManager(),this.newGogAnnouncementListenersManager=listenersManager.getManager(),this.productReleaseNotificationListenersManager=listenersManager.getManager(),this.notificationRemovedListenersManager=listenersManager.getManager(),this.notificationConsumedListenersManager=listenersManager.getManager()}return _createClass(MenuCustomTopicParser,null,[{key:"initClass",value:function(){MenuCustomTopicParser.$inject=["listenersManager"],MenuCustomTopicParser.KEYS=Object.freeze({WISHLIST_DISCOUNT:"wishlisted_products_discounted",FORUM_REPLY:"new_forum_reply",GOG_ANNOUNCEMENT:"gog_announces",PRODUCT_RELEASE:"product_release_notify"})}}]),_createClass(MenuCustomTopicParser,[{key:"parseTopicMessage",value:function(message){var isDownloaded=arguments.length>1&&void 0!==arguments[1]&&arguments[1],messageContent=JSON.parse(message.content),consumed=!1;message.hasOwnProperty("consumed")&&(consumed=message.consumed);var updateTimestamp=null;void 0!==message.date_updated&&(updateTimestamp=Math.floor(this._dateIsoStringToTimestamp(message.date_updated)/1e3));var expirationTimestamp=null;void 0!==message.date_expiration&&(expirationTimestamp=this._dateIsoStringToTimestamp(message.date_expiration));var creationTimestamp;switch(creationTimestamp=void 0!==message.date_created?Math.floor(this._dateIsoStringToTimestamp(message.date_created)/1e3):Math.floor(Date.now()/1e3),messageContent.key){case MenuCustomTopicParser.KEYS.WISHLIST_DISCOUNT:this.newWishlistNotificationListenersManager.callListeners(message.id,messageContent.discountedProducts,consumed,creationTimestamp,expirationTimestamp,updateTimestamp,isDownloaded);break;case MenuCustomTopicParser.KEYS.FORUM_REPLY:var counter=0;message.hasOwnProperty("counter")&&(counter=message.counter),this.newForumNotificationListenersManager.callListeners(message.id,this._formatForumNotification(messageContent),consumed,counter,creationTimestamp,expirationTimestamp,updateTimestamp,isDownloaded);break;case MenuCustomTopicParser.KEYS.GOG_ANNOUNCEMENT:this.newGogAnnouncementListenersManager.callListeners(message.id,this._formatGogAnnouncementNotification(messageContent),consumed,creationTimestamp,expirationTimestamp,updateTimestamp,isDownloaded);break;case MenuCustomTopicParser.KEYS.PRODUCT_RELEASE:this.productReleaseNotificationListenersManager.callListeners(message.id,this._formatProductReleaseNotification(messageContent),consumed,creationTimestamp,expirationTimestamp,updateTimestamp,isDownloaded);break;default:console.warn("Messages topic key not supported: "+messageContent.key)}}},{key:"parseRemovedTopicMessage",value:function(message){var messageContent=JSON.parse(message.content);this.notificationRemovedListenersManager.callListeners(messageContent.removed_by,messageContent[messageContent.removed_by])}},{key:"parseConsumedTopicMessage",value:function(message){var messageContent=JSON.parse(message.content);this.notificationConsumedListenersManager.callListeners(messageContent.id)}},{key:"registerNewWishlistNotificationListener",value:function(listener){return this.newWishlistNotificationListenersManager.addListener(listener)}},{key:"registerNewForumNotificationListener",value:function(listener){return this.newForumNotificationListenersManager.addListener(listener)}},{key:"registerNewGogAnnouncementNotificationListener",value:function(listener){return this.newGogAnnouncementListenersManager.addListener(listener)}},{key:"registerProductReleaseNotificationListener",value:function(listener){return this.productReleaseNotificationListenersManager.addListener(listener)}},{key:"registerNotificationRemovedListener",value:function(listener){return this.notificationRemovedListenersManager.addListener(listener)}},{key:"registerNotificationConsumedListener",value:function(listener){return this.notificationConsumedListenersManager.addListener(listener)}},{key:"_formatGogAnnouncementNotification",value:function(notificationContent){return{announcement:notificationContent.announcement,background:notificationContent.background}}},{key:"_formatProductReleaseNotification",value:function(notificationContent){return{link:notificationContent.product.link,productTitle:notificationContent.product.title,productPrice:notificationContent.product.price,productId:notificationContent.product.productId,productIcon:{full:notificationContent.product.gameIcon.full}}}},{key:"_formatForumNotification",value:function(notificationContent){return{userName:notificationContent.sender_username,userAvatarUrls:{medium:notificationContent.avatars.medium,medium_2x:notificationContent.avatars.medium_2x},userId:notificationContent.from_user_id,forumSlug:notificationContent.forum_slug,topicSlug:notificationContent.topic_slug,threadTitle:notificationContent.thread_title,threadLink:notificationContent.link,forumPostCreationTimestamp:this._dateIsoStringToTimestamp(notificationContent.publish_date)/1e3}}},{key:"_dateIsoStringToTimestamp",value:function(isoDate){var dateParts=isoDate.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);return Date.UTC(parseInt(dateParts[1],10),parseInt(dateParts[2],10)-1,parseInt(dateParts[3],10),parseInt(dateParts[4],10),parseInt(dateParts[5],10),parseInt(dateParts[6],10))}}]),MenuCustomTopicParser}();MenuCustomTopicParser.initClass(),exports.menuCustomTopicParser=angular.module("gogModuleTopicParsers").service("menuCustomTopicParser",MenuCustomTopicParser)},{}],5:[function(_dereq_,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),PresenceTopicParser=function(){function PresenceTopicParser(listenersManager){(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,PresenceTopicParser),this._newStatusListenersManager=listenersManager.getManager(),this._deletedStatusListenersManager=listenersManager.getManager()}return _createClass(PresenceTopicParser,null,[{key:"initClass",value:function(){PresenceTopicParser.$inject=["listenersManager"],PresenceTopicParser.KEYS=Object.freeze({NEW_STATUS:"new_presence_status",DELETED_STATUS:"delete_presence_status"})}}]),_createClass(PresenceTopicParser,[{key:"parseTopicMessage",value:function(message){var content=JSON.parse(message.content);switch(content.key){case PresenceTopicParser.KEYS.NEW_STATUS:this._onNewStatus(content.data);break;case PresenceTopicParser.KEYS.DELETED_STATUS:this._onDeletedStatus(content.data);break;default:console.warn("Unknown presence topic key: "+message.key)}}},{key:"registerNewStatusListener",value:function(listener){return this._newStatusListenersManager.addListener(listener)}},{key:"_onNewStatus",value:function(pusherData){this._newStatusListenersManager.callListeners(pusherData)}},{key:"registerDeletedStatusListener",value:function(listener){return this._deletedStatusListenersManager.addListener(listener)}},{key:"_onDeletedStatus",value:function(data){this._deletedStatusListenersManager.callListeners({userId:data.user_id})}}]),PresenceTopicParser}();PresenceTopicParser.initClass(),exports.presenceTopicParser=angular.module("gogModuleTopicParsers").service("presenceTopicParser",PresenceTopicParser)},{}],6:[function(_dereq_,module,exports){"use strict";_dereq_("./GogModuleTopicParsers"),_dereq_("./MenuCustomTopicParser"),_dereq_("./PresenceTopicParser"),_dereq_("./FriendsTopicParser"),_dereq_("./ActivityFeedTopicParser")},{"./ActivityFeedTopicParser":1,"./FriendsTopicParser":2,"./GogModuleTopicParsers":3,"./MenuCustomTopicParser":4,"./PresenceTopicParser":5}]},{},[6])(6)},module.exports=f()}});